DROP TABLE IF EXISTS Aktivität;
DROP TABLE IF EXISTS Bewertung;
DROP TABLE IF EXISTS BietetAn;
DROP TABLE IF EXISTS Buchung;
DROP TABLE IF EXISTS Reise;
DROP TABLE IF EXISTS Urlaubsprofile;
DROP TABLE IF EXISTS User;

CREATE TABLE User(
    Usernr INT(10) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    Password VARCHAR(30) NOT NULL,
    Geburtsdat DATE NOT NULL,
    Vorname VARCHAR(20) NOT NULL,
    Nachname VARCHAR(20) NOT NULL,
    Rolle Integer(1) NOT NULL,
    UNIQUE KEY index_name (Vorname,Nachname)
);
CREATE TABLE Reise(
    Reisenr INT(10) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    Beschreibung TEXT NOT NULL,
    Ort VARCHAR(20) NOT NULL,
    Region VARCHAR(20) NOT NULL,
    Land VARCHAR(20) NOT NULL,
    Preis DOUBLE(10,2) NOT NULL,
    Jahreszeit VARCHAR(10) NOT NULL
);
CREATE TABLE Buchung(
    Buchungid INT(10) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    Usernr INT(10) REFERENCES User(UserNr),
    Reisenr INT(10) REFERENCES Reise(ReiseNr),
    Kosten DOUBLE(10,2) NOT NULL,
    Von Date NOT NULL,
    Bis Date NOT NULL
);
CREATE TABLE Aktivität(
    Anr INT(10) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    Jahreszeit VARCHAR(10) NOT NULL,
    Beschreibung TEXT NOT NULL,
    Kosten DOUBLE(10,2) NOT NULL, 
    Alternativ INT(10) REFERENCES Aktivität(ANr)
);
CREATE TABLE Urlaubsprofile(
    Profilnr INT(10) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    Usernr INT(10) REFERENCES User(UserNr),
    Reisenr INT(10) REFERENCES Reise(ReiseNr),
    Name VARCHAR(20) NOT NULL
);
CREATE TABLE BietetAn(
    Bnr INT(10) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    Reisenr INT(10) REFERENCES Reise(ReiseNr),
    Anr INT(10) REFERENCES Aktivität(ANr)
);
CREATE TABLE Bewertung(
    Bewertungnr INT(10) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    Usernr INT(10) REFERENCES User(UserNr),
    Anr INT(10) REFERENCES Aktivität(ANr),
    Bewertung TEXT NOT NULL,
    Note Double(1,1) NOT NULL
);